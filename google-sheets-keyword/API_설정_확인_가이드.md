# 네이버 검색광고 API 설정 확인 가이드

## 📋 설정 확인 체크리스트

### 1. Code.js 파일의 API 설정 확인

`Code.js` 파일의 `CONFIG.NAVER_API` 섹션을 확인하세요:

```javascript
const CONFIG = {
  NAVER_API: {
    ACCESS_LICENSE: '여기에_액세스_라이선스_입력',
    SECRET_KEY: '여기에_시크릿_키_입력',
    CUSTOMER_ID: '여기에_고객_ID_입력',
    BASE_URL: 'https://api.naver.com'
  },
  // ...
};
```

#### ✅ 확인 사항:

1. **ACCESS_LICENSE (액세스 라이선스)**
   - [ ] 값이 비어있지 않은가?
   - [ ] 공백이나 특수문자가 잘못 포함되지 않았는가?
   - [ ] 올바른 형식인가? (일반적으로 긴 문자열)

2. **SECRET_KEY (시크릿 키)**
   - [ ] 값이 비어있지 않은가?
   - [ ] Base64 인코딩된 문자열인가?
   - [ ] `AQAAAAB...` 형식으로 시작하는가?

3. **CUSTOMER_ID (고객 ID)**
   - [ ] 숫자로만 구성되어 있는가?
   - [ ] 값이 비어있지 않은가?

4. **BASE_URL**
   - [ ] `https://api.naver.com`으로 설정되어 있는가?

---

## 🔍 네이버 검색광고 센터에서 API 키 확인하기

### 단계 1: 네이버 검색광고 센터 접속

1. [네이버 검색광고 센터](https://searchad.naver.com)에 로그인
2. 우측 상단 **설정** 메뉴 클릭
3. **도구** → **API 관리** 메뉴 선택

### 단계 2: API 키 확인

#### API 키 생성/확인 위치:
- **도구** → **API 관리** → **API 키 관리**

#### 확인해야 할 정보:

1. **액세스 라이선스 (Access License)**
   - API 키 관리 페이지에서 확인
   - 복사 시 앞뒤 공백 제거 확인

2. **시크릿 키 (Secret Key)**
   - API 키 생성 시 한 번만 표시됨
   - 분실 시 재생성 필요
   - Base64 형식으로 표시됨

3. **고객 ID (Customer ID)**
   - 계정 설정 또는 API 관리 페이지에서 확인
   - 숫자로만 구성된 ID

---

## ⚠️ 일반적인 오류 원인

### 1. OAuth 토큰 만료 오류 (401)

**원인:**
- API 키가 만료됨
- API 키가 잘못 입력됨
- 시크릿 키가 변경됨

**해결 방법:**
1. 네이버 검색광고 센터에서 API 키 상태 확인
2. 필요 시 새 API 키 생성
3. Code.js의 설정 값 업데이트

### 2. 서명 오류

**원인:**
- 시크릿 키가 잘못됨
- 타임스탬프 형식 오류
- HMAC-SHA256 서명 생성 오류

**해결 방법:**
1. 시크릿 키가 올바른지 확인
2. Code.js의 `generateSignature` 함수 확인
3. 네이버 API 문서와 서명 생성 로직 비교

### 3. 고객 ID 오류

**원인:**
- 잘못된 고객 ID
- 다른 계정의 고객 ID 사용

**해결 방법:**
1. 네이버 검색광고 센터에서 정확한 고객 ID 확인
2. Code.js의 CUSTOMER_ID 값 업데이트

---

## 🛠️ 설정 값 업데이트 방법

### Google Apps Script에서 수정:

1. **스크립트 편집기 열기**
   - Google 시트에서 **확장 프로그램** → **Apps Script** 클릭

2. **Code.js 파일 열기**
   - 왼쪽 파일 목록에서 `Code.js` 선택

3. **CONFIG 섹션 찾기**
   - 파일 상단의 `CONFIG` 객체 찾기

4. **값 수정**
   ```javascript
   NAVER_API: {
     ACCESS_LICENSE: '새로운_액세스_라이선스',
     SECRET_KEY: '새로운_시크릿_키',
     CUSTOMER_ID: '새로운_고객_ID',
     BASE_URL: 'https://api.naver.com'
   }
   ```

5. **저장 및 배포**
   - 저장 버튼 클릭 (Ctrl+S)
   - 변경 사항이 자동으로 반영됨

---

## 🧪 설정 테스트 방법

### 1. 간단한 키워드 조회로 테스트

1. Google 시트에서 **키워드 도구** 메뉴 열기
2. **검색량 조회 (선택 키워드)** 선택
3. 테스트용 키워드 1-2개 선택
4. 실행하여 오류 발생 여부 확인

### 2. 스크립트 편집기에서 로그 확인

1. **실행** → **검색량조회** 선택
2. 실행 후 **실행 로그** 확인
3. 오류 메시지 확인

---

## 📞 추가 도움말

### 네이버 검색광고 API 문서
- [네이버 검색광고 API 가이드](https://naver.github.io/searchad-apidoc/)
- [API 인증 가이드](https://naver.github.io/searchad-apidoc/#/guides/authentication)

### 오류 코드 참조
- **401**: 인증 오류 (API 키 문제)
- **403**: 권한 오류 (API 키 권한 부족)
- **429**: 요청 제한 초과 (너무 많은 요청)
- **500**: 서버 오류 (네이버 서버 문제)

---

## ✅ 최종 확인 체크리스트

설정을 완료한 후 다음을 확인하세요:

- [ ] Code.js의 CONFIG.NAVER_API 값이 모두 입력되어 있음
- [ ] 네이버 검색광고 센터에서 API 키가 활성화되어 있음
- [ ] API 키의 권한이 올바르게 설정되어 있음
- [ ] 테스트 키워드 조회가 정상 작동함
- [ ] 오류 메시지가 더 이상 나타나지 않음

---

## 🔐 보안 주의사항

⚠️ **중요**: API 키는 민감한 정보입니다!

- Code.js 파일을 공유할 때 API 키를 제거하거나 마스킹하세요
- Git 저장소에 커밋하기 전에 `.gitignore`에 추가하세요
- API 키가 노출된 경우 즉시 재생성하세요


